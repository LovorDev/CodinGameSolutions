using System;
using System.Linq;

namespace SummerChallenge2023
{
    public class Exploiting_superpowers_7
    {
        /**
         * @param wishA The first wish.
         * @param wishB The second wish.
         * @return The hybrid wish you created.
         */
        public static string MixWishes(string wishA, string wishB)
        {
            // Write your code here
            var secondWish = wishB;
            var offset = 0;
            var currentWishInsertIndex = 0;
            var targetString = wishA;
            while (secondWish.Length > 0)
            {
                var part = string.Concat(secondWish.SkipLast(offset++));
                var leftPart = string.Concat(targetString.Skip(currentWishInsertIndex));
                var wishInsertIndex = leftPart.IndexOf(part, StringComparison.Ordinal);

                if (part.Length == 0)
                {
                    targetString = targetString.Insert(++currentWishInsertIndex, secondWish[0].ToString());
                    offset = 0;
                    secondWish = secondWish.Remove(0, 1);
                    continue;
                }

                if (wishInsertIndex == -1)
                {
                    continue;
                }
                
                currentWishInsertIndex += wishInsertIndex + part.Length - 1;
                offset = 0;
                secondWish = secondWish.Remove(0, part.Length);
            }
            
            return targetString;
        }
    }
}